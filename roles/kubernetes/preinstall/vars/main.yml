---
pkgs:
  apparmor:
    - "{{ ansible_os_family == 'Debian' }}"
  apt-transport-https:
    - "{{ ansible_os_family == 'Debian' }}"
  aufs-tools:
    - "{{ ansible_os_family == 'Debian' }}"
    - "{{ ansible_distribution_major_version == '10' }}"
    - "{{ 'k8s_cluster' in group_names }}"
  bash-completion: []
  conntrack:
    - "{{ ansible_os_family in ['Debian', 'RedHat'] }}"
    - "{{ ansible_distribution != 'openEuler' }}"
    - "{{ 'k8s_cluster' in group_names }}"
  conntrack-tools:
    - "{{ ansible_os_family == 'Suse' or ansible_distribution in ['Amazon', 'openEuler'] }}"
    - "{{ 'k8s_cluster' in group_names }}"
  container-selinux:
    - "{{ ansible_os_family == 'RedHat' }}"
    - "{{ 'k8s_cluster' in group_names }}"
  curl: []
  device-mapper:
    - "{{ ansible_os_family == 'Suse' or ansible_distribution == 'openEuler' }}"
    - "{{ 'k8s_cluster' in group_names }}"
  device-mapper-libs:
    - "{{ ansible_os_family == 'RedHat' }}"
    - "{{ ansible_distribution != 'openEuler' }}"
  e2fsprogs: []
  ebtables: []
  gnupg:
    - "{{ ansible_distribution == 'Debian' }}"
    - "{{ ansible_distribution_major_version in ['11', '12'] }}"
    - "{{ 'k8s_cluster' in group_names }}"
  ipset:
    - "{{ kube_proxy_mode != 'ipvs' }}"
    - "{{ 'k8s_cluster' in group_names }}"
  iptables:
    - "{{ ansible_os_family in ['Debian', 'RedHat'] }}"
  ipvsadm:
    - "{{ kube_proxy_mode == 'ipvs' }}"
    - "{{ 'k8s_cluster' in group_names }}"
  libseccomp:
    - "{{ ansible_os_family == 'RedHat' }}"
  libseccomp2:
    - "{{ ansible_os_family in ['Debian', 'Suse'] }}"
    - "{{ 'k8s_cluster' in group_names }}"
  libselinux-python:  # TODO: Handle rehat_family + major < 8
    - "{{ ansible_distribution == 'Amazon' }}"
  libselinux-python3:
    - "{{ ansible_distribution == 'Fedora' }}"
  mergerfs:
    - "{{ ansible_distribution == 'Debian' }}"
    - "{{ ansible_distribution_major_version == '12' }}"
  nss:
    - "{{ ansible_os_family == 'RedHat' }}"
  openssl: []
  python-apt:
    - "{{ ansible_os_family == 'Debian' }}"
    - "{{ ansible_distribution_major_version == '10' }}"
  python3-apt:
    - "{{ ansible_os_family == 'Debian' }}"
    - "{{ ansible_distribution_major_version != '10' }}"
  python3-libselinux:
    - "{{ ansible_distribution in ['RedHat', 'CentOS'] }}"
  rsync: []
  socat: []
  software-properties-common:
    - "{{ ansible_os_family == 'Debian' }}"
  tar: []
  unzip: []
  xfsprogs: []
